# Metadata
> Title: Martingale

> Difficulty: Easy

> Category: Finance/Stochastic Calculus/Martingale

> Tags: Stochastic Calculus; Martingale

> Source: Egret Asset

# Question
${S_n}$ is a random walk on integers, where
\begin{align}
    P(S_{n+1} = k + 1 | S_n = k) = \frac12 - \frac{1}{4k}\\
    P(S_{n+1} = k - 1 | S_n = k) = \frac12 + \frac{1}{4k}\\
    P(S_{n+1} = 0 | S_n = 0) = 1
\end{align}
What is the probability that the random walk will end up with 100 before hitting 0 given that it starts at 50?

# Answer
The answer is $\frac14$. We first show that ${S_n^2}$ is a martingale:
\begin{align}
    E(S_n^2 | S_{n-1}^2 = k^2) = (k+1)^2 \left(\frac12 - \frac{1}{4k}\right) + (k-1)^2 \left(\frac12 + \frac{1}{4k}\right) = k^2
\end{align}
Thus, by the Optional Sampling Theorem
\begin{align}
    E(S_N^2 = 100 | S_0^2 = {50}^2) = {100}^2 P(S_N = 100 | S_0 = 50) = E(S_0^2 = {50}^2) = {50}^2 \implies P(S_N = 100 | S_0 = 50) = \frac14
\end{align}